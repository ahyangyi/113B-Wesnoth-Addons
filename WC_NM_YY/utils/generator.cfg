#define WORLD_CONQUEST_CLEAR_LABELS
[lua]
    code=<<
      local w, h, b = wesnoth.get_map_size()
      for y1 = 1 - b, h + b do
        for x1 = 1 - b, w + b do
          wesnoth.fire("label",{x=x1,y=y1,text=""})
        end
      end
    >>
[/lua]
#enddef
	
#define WORLD_CONQUEST_GENERATOR LENGTH VILLAGES CASTLE ITERATIONS SIZE PLAYERS ISLAND
	map_width={LENGTH}
	map_height={LENGTH}
	iterations={ITERATIONS}
	hill_size={SIZE}
	max_lakes=10
	villages={VILLAGES}
	players={PLAYERS}
	min_lake_height=150
	lake_size=125
	river_frequency=100
	island_size={ISLAND}
	castle_size={CASTLE}

	temperature_iterations={ITERATIONS}
	temperature_size={SIZE}

	roads=20
	road_windiness=3
	[height]
		height=900
		terrain=Uh
	[/height]
	[height]
		height=800
		terrain=Uu
	[/height]
	[height]
		height=750
		terrain=Xu
	[/height]
	[height]
		height=725
		terrain=Mm^Xm
	[/height]
	[height]
		height=675
		terrain=Mm
	[/height]
	[height]
		height=550
		terrain=Hh
	[/height]
	[height]
		height=100
		terrain=Gg
	[/height]
	[height]
		height=30
		terrain=Ds
	[/height]
	[height]
		height=1
		terrain=Ww
	[/height]
	[height]
		height=0
		terrain=Wo
	[/height]

#water at cold temperatures becomes ice
	[convert]
		min_height=50
		max_temperature=50
		from=Ww, Wo
		to=Ai
	[/convert]

#at low temperatures, snow appears
	[convert]
		min_height=50
		max_temperature=75
		from=Gg, Ds
		to=Aa
	[/convert]

#hills at low temperatures get snow on them
	[convert]
		max_temperature=100
		from=Hh
		to=Ha
	[/convert]

#savannah appears on moderate temperature and elevation
	[convert]
		min_temperature=500
		max_temperature=800
		min_height=250
		max_height=400
		from=Gg
		to=Gs
	[/convert]

#swamp appears on low land, at moderate temperatures
	   [convert]
		min_temperature=400
		max_temperature=700
		max_height=200
		from=Gg
		to=Ss
	[/convert]

#forest appears at moderate temperatures
	[convert]
		min_temperature=320
		max_temperature=420
		from=Gg
		to=Gs^Fp
	[/convert]

#jungle appears at moderately high temperatures
	[convert]
		min_temperature=450
		max_temperature=520
		from=Gg,Gs
		to=Gs^Ft
	[/convert]

#fungus appears at medium temperatures and extremely high elevation
	[convert]
		min_temperature=500
		max_temperature=525
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=550
		max_temperature=575
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=600
		max_temperature=625
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

#lava appears at extreme temperatures and elevation
	[convert]
		min_temperature=850
		min_height=800
		from=Uu, Uh, Uu^Uf
		to=Ql
	[/convert]

#desert appears at extreme temperatures
	[convert]
		min_temperature=800
		from=Gg
		to=Ds
	[/convert]

#dunes appear at extreme temperatures and moderate elevation
	[convert]
		min_temperature=800
		min_height=475
		max_height=550
		from=Ds, Hh
		to=Hd
	[/convert]

#road costs
	[road_cost]
		terrain=Gg
		cost=10
		convert_to=Re
	[/road_cost]

	[road_cost]
		terrain=Ds
		cost=25
		convert_to=Re
	[/road_cost]

        [road_cost]
		terrain=Gs^Fp
		cost=20
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Gs^Ft
		cost=30
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Ww
		cost=50
		convert_to_bridge=Ww^Bw|, Ww^Bw/, Ww^Bw\
		convert_to=Ch
        [/road_cost]

        [road_cost]
		terrain=Hh
		cost=30
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm
		cost=40
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm^Xm
		cost=75
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Qxu
		cost=100
		convert_to_bridge=Qxu^Bs|, Qxu^Bs/, Qxu^Bs\
		convert_to=Cud
        [/road_cost]
        [road_cost]
		terrain=Ql
		cost=100
		convert_to_bridge=Ql^Bs|, Ql^Bs/, Ql^Bs\
		convert_to=Cud
        [/road_cost]

        [road_cost]
		terrain=Uu
		cost=10
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Uh
		cost=40
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Xu
		cost=90
		convert_to=Re
        [/road_cost]

#road going through snow is covered over by
#the snow (presumably the road was built when
#it wasn't snowing)
        [road_cost]
		terrain=Aa
		cost=20
		convert_to=Aa
        [/road_cost]

	[road_cost]
		terrain=Re
		cost=2
		convert_to=Re
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw|
		cost=2
		convert_to=Ww^Bw|
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw/
		cost=2
		convert_to=Ww^Bw/
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw\
		cost=2
		convert_to=Ww^Bw\
	[/road_cost]
	[road_cost]
		terrain=Ch
		cost=2
		convert_to=Ch
	[/road_cost]

        [village]
            terrain=Gg
            convert_to=Gg^Vh
            adjacent_liked=Gg, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=8
        [/village]

        [village]
            terrain=Gs
            convert_to=Gs^Vht
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=5
        [/village]

        [village]
            terrain=Ds
            convert_to=Dd^Vda
            rating=2
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Uu
            convert_to=Uu^Vud
            rating=4
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]
        [village]
            terrain=Uh
            convert_to=Uu^Vu
            rating=3
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]

        #villages in forest are Elvish
        [village]
            terrain=Gs^Fp
            convert_to=Gg^Ve
            rating=4
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp, Gs^Fp, Gs^Fp
        [/village]
        [village]
            terrain=Hh
            convert_to=Hh^Vhh
            rating=4
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]
        [village]
            terrain=Mm
            convert_to=Mm^Vhh
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #villages in snow
        [village]
            terrain=Aa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Aa^Fpa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #swamp villages
        [village]
            terrain=Ss
            convert_to=Ss^Vhs
            rating=2
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #mermen villages - give them low chance of appearing
        [village]
            terrain=Ww
            convert_to=Ww^Vm
            rating=1
            adjacent_liked=Ww, Ww
        [/village]

        [castle]
            valid_terrain=Gs, Gg, Gs^Fp, Hh
            min_distance=12
        [/castle]

        [naming]
		{VILLAGE_NAMES}
        [/naming]
#enddef

#define WORLD_CONQUEST_GENERATOR_CAVE LENGTH VILLAGES CASTLE ITERATIONS SIZE PLAYERS ISLAND
	map_width={LENGTH}
	map_height={LENGTH}
	iterations={ITERATIONS}
	hill_size={SIZE}
	max_lakes=200
	villages={VILLAGES}
	players={PLAYERS}
	min_lake_height=350
	lake_size=125
	river_frequency=500
	island_size={ISLAND}
	castle_size={CASTLE}

	temperature_iterations={ITERATIONS}
	temperature_size=8

	roads=12
	road_windiness=10
	[height]
		height=450
		terrain=Xu
	[/height]
	[height]
		height=400
		terrain=Uh
	[/height]
	[height]
		height=325
		terrain=Uu
	[/height]
	[height]
		height=275
		terrain=Re
	[/height]
	[height]
		height=250
		terrain=Qxu
	[/height]
	[height]
		height=150
		terrain=Re
	[/height]
	[height]
		height=1
		terrain=Ww
	[/height]
	[height]
		height=0
		terrain=Wo
	[/height]

	[convert]
		max_height=999
		from=Wo
		to=Xu
	[/convert]

	[convert]
		max_height=150
		from=Ww
		to=Qxu
	[/convert]

#fungus appears at medium temperatures and elevation
	[convert]
		min_temperature=500
		max_temperature=525
		min_height=250
		max_height=400
		from=Uu,Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=550
		max_temperature=575
		min_height=250
		max_height=400
		from=Uu,Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=600
		max_temperature=625
		min_height=250
		max_height=400
		from=Uu,Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=500
		max_temperature=525
		min_height=100
		max_height=250
		from=Re
		to=Re^Uf
	[/convert]

	[convert]
		min_temperature=550
		max_temperature=575
		min_height=100
		max_height=250
		from=Re
		to=Re^Uf
	[/convert]

	[convert]
		min_temperature=600
		max_temperature=625
		min_height=100
		max_height=250
		from=Re
		to=Re^Uf
	[/convert]

#lava appears at high temperatures
	[convert]
		min_temperature=500
		min_height=1
		max_height=150
		from=Re,Uu,Uh,Uu^Uf,Re^Uf
		to=Ql
	[/convert]

	[convert]
		min_temperature=750
		min_height=100
		max_height=300
		from=Re,Uu,Uh,Uu^Uf,Re^Uf
		to=Ql
	[/convert]

	[convert]
		min_temperature=800
		min_height=500
		from=Xu
		to=Qlf
	[/convert]

#desert appears at extreme temperatures and medium elevation
	[convert]
		min_temperature=700
		min_height=150
		max_height=300
		from=Uu
		to=Ds
	[/convert]

#road costs
	[road_cost]
		terrain=Re
		cost=10
		convert_to=Rd
	[/road_cost]

	[road_cost]
		terrain=Ds
		cost=25
		convert_to=Rd
	[/road_cost]

        [road_cost]
		terrain=Ww
		cost=50
		convert_to_bridge=Ww^Bw|, Ww^Bw/, Ww^Bw\
		convert_to=Cud
        [/road_cost]

        [road_cost]
		terrain=Qxu
		cost=150
		convert_to_bridge=Qxu^Bs|, Qxu^Bs/, Qxu^Bs\
		convert_to=Cud
        [/road_cost]
        [road_cost]
		terrain=Ql
		cost=60
		convert_to_bridge=Ql^Bs|, Ql^Bs/, Ql^Bs\
		convert_to=Cud
        [/road_cost]

        [road_cost]
		terrain=Uu
		cost=10
		convert_to=Rd
        [/road_cost]
        [road_cost]
		terrain=Uh
		cost=20
		convert_to=Rd
        [/road_cost]
        [road_cost]
		terrain=Xu
		cost=40
		convert_to=Rd
        [/road_cost]
        [road_cost]
		terrain=Uu^Uf
		cost=30
		convert_to=Rd
        [/road_cost]
        [road_cost]
		terrain=Re^Uf
		cost=40
		convert_to=Rd
        [/road_cost]

#road going through snow is covered over by
#the snow (presumably the road was built when
#it wasn't snowing)
        [road_cost]
		terrain=Aa
		cost=20
		convert_to=Aa
        [/road_cost]

	[road_cost]
		terrain=Qxu^Bs|
		cost=2
		convert_to=Qxu^Bs|
	[/road_cost]
	[road_cost]
		terrain=Qxu^Bs/
		cost=2
		convert_to=Qxu^Bs/
	[/road_cost]
	[road_cost]
		terrain=Qxu^Bs\
		cost=2
		convert_to=Qxu^Bs\
	[/road_cost]
	[road_cost]
		terrain=Ql^Bs|
		cost=2
		convert_to=Ql^Bs|
	[/road_cost]
	[road_cost]
		terrain=Qlu^Bs/
		cost=2
		convert_to=Ql^Bs/
	[/road_cost]
	[road_cost]
		terrain=Ql^Bs\
		cost=2
		convert_to=Ql^Bs\
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw|
		cost=2
		convert_to=Ww^Bw|
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw/
		cost=2
		convert_to=Ww^Bw/
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw\
		cost=2
		convert_to=Ww^Bw\
	[/road_cost]
	[road_cost]
		terrain=Ch
		cost=2
		convert_to=Ch
	[/road_cost]

        [village]
            terrain=Uu
            convert_to=Uu^Vud
            rating=8
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]
        [village]
            terrain=Re
            convert_to=Uu^Vud
            rating=3
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]
        [village]
            terrain=Uh
            convert_to=Uu^Vu
            rating=8
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]

        #mermen villages - give them low chance of appearing
        [village]
            terrain=Ww
            convert_to=Ww^Vm
            rating=4
            adjacent_liked=Ww, Ww
        [/village]

        [castle]
            valid_terrain=Gs,Re,Uu,Uh
            min_distance=12
        [/castle]

        [naming]
		{VILLAGE_NAMES}
        [/naming]
#enddef

#define WORLD_CONQUEST_GENERATOR_ARCHIPELAGO LENGTH VILLAGES CASTLE ITERATIONS SIZE PLAYERS ISLAND
	map_width={LENGTH}
	map_height={LENGTH}
	iterations={ITERATIONS}
	hill_size={SIZE}
	max_lakes=200
	villages={VILLAGES}
	players={PLAYERS}
	min_lake_height=350
	lake_size=125
	river_frequency=200
	island_size={ISLAND}
	castle_size={CASTLE}

	temperature_iterations={ITERATIONS}
	temperature_size={SIZE}

	roads=8
	road_windiness=8
	[height]
		height=950
		terrain=Uh
	[/height]
	[height]
		height=900
		terrain=Uu
	[/height]
	[height]
		height=800
		terrain=Xu
	[/height]
	[height]
		height=700
		terrain=Mm^Xm
	[/height]
	[height]
		height=600
		terrain=Mm
	[/height]
	[height]
		height=550
		terrain=Hh
	[/height]
	[height]
		height=450
		terrain=Gs
	[/height]
	[height]
		height=400
		terrain=Ds
	[/height]
	[height]
		height=200
		terrain=Ww
	[/height]
	[height]
		height=0
		terrain=Wo
	[/height]

#water at cold temperatures becomes ice
	[convert]
		min_height=50
		max_temperature=20
		from=Ww, Wo
		to=Ai
	[/convert]

#at low temperatures, snow appears
	[convert]
		min_height=50
		max_temperature=20
		from=Gg, Ds
		to=Aa
	[/convert]

#hills at low temperatures get snow on them
	[convert]
		max_temperature=50
		from=Hh
		to=Ha
	[/convert]

#savannah appears on moderate temperature and elevation
	[convert]
		min_temperature=500
		max_temperature=800
		min_height=250
		max_height=400
		from=Gg
		to=Gs
	[/convert]

#swamp appears on low land, at moderate temperatures
	   [convert]
		min_temperature=400
		max_temperature=700
		max_height=200
		from=Gg
		to=Ss
	[/convert]

#jungle appears at moderately temperatures
	[convert]
		min_temperature=300
		max_temperature=500
		from=Gs
		to=Gs^Ft
	[/convert]

#fungus appears at medium temperatures and extremely high elevation
	[convert]
		min_temperature=500
		max_temperature=525
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=550
		max_temperature=575
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=600
		max_temperature=625
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

#lava appears at extreme temperatures and elevation
	[convert]
		min_temperature=850
		min_height=800
		from=Uu, Uh, Uu^Uf
		to=Ql
	[/convert]

#desert appears at extreme temperatures
	[convert]
		min_temperature=800
		from=Gg
		to=Ds
	[/convert]

#dunes appear at extreme temperatures and moderate elevation
	[convert]
		min_temperature=800
		min_height=475
		max_height=550
		from=Ds, Hh
		to=Hd
	[/convert]

#road costs
	[road_cost]
		terrain=Gg
		cost=10
		convert_to=Re
	[/road_cost]

	[road_cost]
		terrain=Ds
		cost=25
		convert_to=Re
	[/road_cost]

        [road_cost]
		terrain=Gs^Fp
		cost=20
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Gs^Ft
		cost=20
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Ww
		cost=50
		convert_to_bridge=Ww^Bw|, Ww^Bw/, Ww^Bw\
		convert_to=Ce
        [/road_cost]

        [road_cost]
		terrain=Wo
		cost=200
		convert_to_bridge=Wo^Bw|, Wo^Bw/, Wo^Bw\
		convert_to=Ce
        [/road_cost]

        [road_cost]
		terrain=Hh
		cost=30
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm
		cost=40
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm^Xm
		cost=75
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Qxu
		cost=100
		convert_to_bridge=Qxu^Bs|, Qxu^Bs/, Qxu^Bs\
		convert_to=Cud
        [/road_cost]
        [road_cost]
		terrain=Ql
		cost=100
		convert_to_bridge=Ql^Bs|, Ql^Bs/, Ql^Bs\
		convert_to=Cud
        [/road_cost]

        [road_cost]
		terrain=Uu
		cost=10
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Uh
		cost=40
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Xu
		cost=90
		convert_to=Re
        [/road_cost]

#road going through snow is covered over by
#the snow (presumably the road was built when
#it wasn't snowing)
        [road_cost]
		terrain=Aa
		cost=20
		convert_to=Aa
        [/road_cost]

	[road_cost]
		terrain=Re
		cost=2
		convert_to=Re
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw|
		cost=2
		convert_to=Ww^Bw|
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw/
		cost=2
		convert_to=Ww^Bw/
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw\
		cost=2
		convert_to=Ww^Bw\
	[/road_cost]
	[road_cost]
		terrain=Ch
		cost=2
		convert_to=Ch
	[/road_cost]

        [village]
            terrain=Gg
            convert_to=Gg^Vh
            adjacent_liked=Gg, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=8
        [/village]

        [village]
            terrain=Gs
            convert_to=Gs^Vht
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=5
        [/village]

        [village]
            terrain=Ds
            convert_to=Dd^Vda
            rating=5
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Uu
            convert_to=Uu^Vud
            rating=4
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]
        [village]
            terrain=Uh
            convert_to=Uu^Vu
            rating=3
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]

        #villages in forest are Elvish
        [village]
            terrain=Gs^Fp
            convert_to=Gg^Ve
            rating=4
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp, Gs^Fp, Gs^Fp
        [/village]
        [village]
            terrain=Hh
            convert_to=Hh^Vhh
            rating=4
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]
        [village]
            terrain=Mm
            convert_to=Mm^Vhh
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #villages in snow
        [village]
            terrain=Aa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Aa^Fpa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #swamp villages
        [village]
            terrain=Ss
            convert_to=Ss^Vhs
            rating=8
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #mermen villages
        [village]
            terrain=Ww
            convert_to=Ww^Vm
            rating=6
            adjacent_liked=Ww, Ww
        [/village]

        [castle]
            valid_terrain=Gs, Gg, Gs^Fp, Hh, Ds, Ww
            min_distance=12
        [/castle]

        [naming]
		{VILLAGE_NAMES}
        [/naming]
#enddef

#define WORLD_CONQUEST_GENERATOR_NORTHLANDS LENGTH VILLAGES CASTLE ITERATIONS SIZE PLAYERS ISLAND
	map_width={LENGTH}
	map_height={LENGTH}
	iterations={ITERATIONS}
	hill_size={SIZE}
	max_lakes=10
	villages={VILLAGES}
	players={PLAYERS}
	min_lake_height=150
	lake_size=125
	river_frequency=100
	island_size={ISLAND}
	castle_size={CASTLE}

	temperature_iterations={ITERATIONS}
	temperature_size=4

	roads=10
	road_windiness=7
	[height]
		height=900
		terrain=Uh
	[/height]
	[height]
		height=800
		terrain=Uu
	[/height]
	[height]
		height=775
		terrain=Xu
	[/height]
	[height]
		height=700
		terrain=Mm^Xm
	[/height]
	[height]
		height=625
		terrain=Mm
	[/height]
	[height]
		height=475
		terrain=Hh
	[/height]
	[height]
		height=310
		terrain=Gg
	[/height]
	[height]
		height=300
		terrain=Ds
	[/height]
	[height]
		height=200
		terrain=Ww
	[/height]
	[height]
		height=0
		terrain=Wo
	[/height]

#water at cold temperatures becomes ice
	[convert]
		min_height=50
		max_temperature=200
		from=Ww, Wo
		to=Ai
	[/convert]

#at low temperatures, snow appears
	[convert]
		min_height=180
		max_temperature=300
		from=Gg, Ds
		to=Aa
	[/convert]

#hills at low temperatures get snow on them
	[convert]
		max_temperature=425
		min_height=500
		from=Hh
		to=Ha
	[/convert]

#swamp appears on low land, at moderate temperatures
	   [convert]
		min_temperature=600
		max_temperature=900
		max_height=200
		from=Gg
		to=Ss
	[/convert]

#snowy forest appears at low temperatures
	[convert]
		min_temperature=240
		max_temperature=320
		from=Aa, Gs
		to=Aa^Fpa
	[/convert]

#forest appears at moderate temperatures
	[convert]
		min_temperature=350
		max_temperature=420
		from=Gg
		to=Gs^Fp
	[/convert]

#fungus appears at medium temperatures and extremely high elevation
	[convert]
		min_temperature=500
		max_temperature=525
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=550
		max_temperature=575
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=600
		max_temperature=625
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

#lava appears at extreme temperatures and elevation
	[convert]
		min_temperature=850
		min_height=800
		from=Uu, Uh, Uu^Uf
		to=Ql
	[/convert]

#desert appears at extreme temperatures
	[convert]
		min_temperature=900
		from=Gg
		to=Ds
	[/convert]

#road costs
	[road_cost]
		terrain=Gg
		cost=10
		convert_to=Re
	[/road_cost]

	[road_cost]
		terrain=Ds
		cost=25
		convert_to=Re
	[/road_cost]

        [road_cost]
		terrain=Gs^Fp
		cost=20
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Gs^Ft
		cost=40
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Ww
		cost=50
		convert_to_bridge=Ww^Bw|, Ww^Bw/, Ww^Bw\
		convert_to=Ch
        [/road_cost]

        [road_cost]
		terrain=Hh
		cost=30
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm
		cost=40
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm^Xm
		cost=75
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Qxu
		cost=100
		convert_to_bridge=Qxu^Bs|, Qxu^Bs/, Qxu^Bs\
		convert_to=Cud
        [/road_cost]
        [road_cost]
		terrain=Ql
		cost=100
		convert_to_bridge=Ql^Bs|, Ql^Bs/, Ql^Bs\
		convert_to=Cud
        [/road_cost]

        [road_cost]
		terrain=Uu
		cost=10
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Uh
		cost=40
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Xu
		cost=90
		convert_to=Re
        [/road_cost]

#apparently the eskimos shovel their roads really diligently
        [road_cost]
		terrain=Aa
		cost=20
		convert_to=Re
        [/road_cost]

	[road_cost]
		terrain=Re
		cost=2
		convert_to=Re
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw|
		cost=2
		convert_to=Ww^Bw|
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw/
		cost=2
		convert_to=Ww^Bw/
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw\
		cost=2
		convert_to=Ww^Bw\
	[/road_cost]
	[road_cost]
		terrain=Ch
		cost=2
		convert_to=Ch
	[/road_cost]

        [village]
            terrain=Gg
            convert_to=Gg^Vh
            adjacent_liked=Gg, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=5
        [/village]

        [village]
            terrain=Gs
            convert_to=Gs^Vht
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=5
        [/village]

        [village]
            terrain=Ds
            convert_to=Dd^Vda
            rating=2
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Uu
            convert_to=Uu^Vud
            rating=4
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]
        [village]
            terrain=Uh
            convert_to=Uu^Vu
            rating=3
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]

        #villages in forest are Elvish
        [village]
            terrain=Gs^Fp
            convert_to=Gg^Ve
            rating=4
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp, Gs^Fp, Gs^Fp
        [/village]
        [village]
            terrain=Hh
            convert_to=Hh^Vhh
            rating=8
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]
        [village]
            terrain=Mm
            convert_to=Mm^Vhh
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #villages in snow
        [village]
            terrain=Aa
            convert_to=Aa^Vha
            rating=5
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Aa^Fpa
            convert_to=Aa^Vha
            rating=5
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #swamp villages
        [village]
            terrain=Ss
            convert_to=Ss^Vhs
            rating=2
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #mermen villages - give them low chance of appearing
        [village]
            terrain=Ww
            convert_to=Ww^Vm
            rating=1
            adjacent_liked=Ww, Ww
        [/village]

        [castle]
            valid_terrain=Gs, Gg, Gs^Fp, Hh, Aa, Ha
            min_distance=12
        [/castle]

        [naming]
		{VILLAGE_NAMES}
        [/naming]
#enddef

#define WORLD_CONQUEST_GENERATOR_JUNGLE LENGTH VILLAGES CASTLE ITERATIONS SIZE PLAYERS ISLAND
	map_width={LENGTH}
	map_height={LENGTH}
	iterations={ITERATIONS}
	hill_size={SIZE}
	max_lakes=50
	villages={VILLAGES}
	players={PLAYERS}
	min_lake_height=150
	lake_size=125
	river_frequency=100
	island_size={ISLAND}
	castle_size={CASTLE}

	temperature_iterations={ITERATIONS}
	temperature_size=9

	roads=12
	road_windiness=10
	[height]
		height=900
		terrain=Uh
	[/height]
	[height]
		height=800
		terrain=Uu
	[/height]
	[height]
		height=750
		terrain=Xu
	[/height]
	[height]
		height=725
		terrain=Mm^Xm
	[/height]
	[height]
		height=675
		terrain=Mm
	[/height]
	[height]
		height=550
		terrain=Hh
	[/height]
	[height]
		height=300
		terrain=Gs
	[/height]
	[height]
		height=250
		terrain=Ds
	[/height]
	[height]
		height=200
		terrain=Ss
	[/height]
	[height]
		height=150
		terrain=Ds
	[/height]
	[height]
		height=100
		terrain=Ss
	[/height]
	[height]
		height=30
		terrain=Ds
	[/height]
	[height]
		height=1
		terrain=Ww
	[/height]
	[height]
		height=0
		terrain=Wo
	[/height]

#swamp appears on low land, at moderate temperatures
	[convert]
		min_temperature=300
		max_temperature=700
		max_height=375
		from=Gs
		to=Ss
	[/convert]

	[convert]
		min_temperature=300
		max_temperature=700
		min_height=425
		max_height=475
		from=Gs
		to=Ss
	[/convert]

#jungle appears at moderate temperatures
	[convert]
		min_temperature=200
		max_temperature=700
		from=Gg,Gs
		to=Gs^Ft
	[/convert]

#fungus appears at medium temperatures and extremely high elevation
	[convert]
		min_temperature=475
		max_temperature=525
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=550
		max_temperature=5600
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=625
		max_temperature=675
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

#lava appears at extreme temperatures and elevation
	[convert]
		min_temperature=850
		min_height=800
		from=Uu, Uh, Uu^Uf
		to=Ql
	[/convert]

#desert appears at extreme temperatures
	[convert]
		min_temperature=800
		from=Gg
		to=Ds
	[/convert]

#dunes appear at extreme temperatures and moderate elevation
	[convert]
		min_temperature=800
		min_height=475
		max_height=550
		from=Ds, Hh
		to=Hd
	[/convert]

#road costs
	[road_cost]
		terrain=Gg
		cost=10
		convert_to=Re
	[/road_cost]

	[road_cost]
		terrain=Ds
		cost=25
		convert_to=Re
	[/road_cost]

        [road_cost]
		terrain=Gs^Fp
		cost=20
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Gs^Ft
		cost=20
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Ww
		cost=50
		convert_to_bridge=Ww^Bw|, Ww^Bw/, Ww^Bw\
		convert_to=Chs
        [/road_cost]

        [road_cost]
		terrain=Ss
		cost=10
		convert_to_bridge=Ss^Bw|, Ss^Bw/, Ss^Bw\
		convert_to=Chs
        [/road_cost]

        [road_cost]
		terrain=Hh
		cost=30
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm
		cost=40
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm^Xm
		cost=75
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Qxu
		cost=100
		convert_to_bridge=Qxu^Bs|, Qxu^Bs/, Qxu^Bs\
		convert_to=Cud
        [/road_cost]
        [road_cost]
		terrain=Ql
		cost=100
		convert_to_bridge=Ql^Bs|, Ql^Bs/, Ql^Bs\
		convert_to=Cud
        [/road_cost]

        [road_cost]
		terrain=Uu
		cost=10
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Uh
		cost=40
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Xu
		cost=90
		convert_to=Re
        [/road_cost]

#road going through snow is covered over by
#the snow (presumably the road was built when
#it wasn't snowing)
        [road_cost]
		terrain=Aa
		cost=20
		convert_to=Aa
        [/road_cost]

	[road_cost]
		terrain=Re
		cost=2
		convert_to=Re
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw|
		cost=2
		convert_to=Ww^Bw|
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw/
		cost=2
		convert_to=Ww^Bw/
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw\
		cost=2
		convert_to=Ww^Bw\
	[/road_cost]
	[road_cost]
		terrain=Ch
		cost=2
		convert_to=Ch
	[/road_cost]

        [village]
            terrain=Gg
            convert_to=Gg^Vh
            adjacent_liked=Gg, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=5
        [/village]

        [village]
            terrain=Gs
            convert_to=Gs^Vht
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=8
        [/village]

        [village]
            terrain=Ds
            convert_to=Dd^Vda
            rating=4
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Uu
            convert_to=Uu^Vud
            rating=4
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]
        [village]
            terrain=Uh
            convert_to=Uu^Vu
            rating=3
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]

        #villages in forest are Elvish
        [village]
            terrain=Gs^Fp
            convert_to=Gg^Ve
            rating=5
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp, Gs^Fp, Gs^Fp
        [/village]
        [village]
            terrain=Hh
            convert_to=Hh^Vhh
            rating=4
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]
        [village]
            terrain=Mm
            convert_to=Mm^Vhh
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #villages in snow
        [village]
            terrain=Aa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Aa^Fpa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #swamp villages
        [village]
            terrain=Ss
            convert_to=Ss^Vhs
            rating=8
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #mermen villages - give them low chance of appearing
        [village]
            terrain=Ww
            convert_to=Ww^Vm
            rating=1
            adjacent_liked=Ww, Ww
        [/village]

        [castle]
            valid_terrain=Gs, Gg, Gs^Fp, Hh, Gs^Ft, Ss
            min_distance=12
        [/castle]

        [naming]
		{VILLAGE_NAMES}
        [/naming]
#enddef

#define WORLD_CONQUEST_GENERATOR_DESERT LENGTH VILLAGES CASTLE ITERATIONS SIZE PLAYERS ISLAND
	map_width={LENGTH}
	map_height={LENGTH}
	iterations={ITERATIONS}
	hill_size={SIZE}
	max_lakes=10
	villages={VILLAGES}
	players={PLAYERS}
	min_lake_height=150
	lake_size=125
	river_frequency=100
	island_size={ISLAND}
	castle_size={CASTLE}

	temperature_iterations={ITERATIONS}
	temperature_size=8

	roads=12
	road_windiness=10
	[height]
		height=900
		terrain=Uh
	[/height]
	[height]
		height=800
		terrain=Uu
	[/height]
	[height]
		height=750
		terrain=Xu
	[/height]
	[height]
		height=725
		terrain=Mm^Xm
	[/height]
	[height]
		height=675
		terrain=Mm
	[/height]
	[height]
		height=550
		terrain=Hh
	[/height]
	[height]
		height=175
		terrain=Gs
	[/height]
	[height]
		height=30
		terrain=Ds
	[/height]
	[height]
		height=1
		terrain=Ww
	[/height]
	[height]
		height=0
		terrain=Wo
	[/height]

#swamp appears on low land, at moderate temperatures
	   [convert]
		min_temperature=300
		max_temperature=700
		max_height=300
		from=Gg,Gs
		to=Ss
	[/convert]

#jungle appears at moderately high temperatures
	[convert]
		min_temperature=380
		max_temperature=430
		from=Gg,Gs
		to=Gs^Ft
	[/convert]
	[convert]
		min_temperature=460
		max_temperature=520
		from=Gg,Gs
		to=Gs^Ft
	[/convert]

#fungus appears at medium temperatures and extremely high elevation
	[convert]
		min_temperature=500
		max_temperature=525
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=550
		max_temperature=575
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

	[convert]
		min_temperature=600
		max_temperature=625
		min_height=825
		max_height=950
		from=Uu, Uh
		to=Uu^Uf
	[/convert]

#lava appears at extreme temperatures and elevation
	[convert]
		min_temperature=900
		min_height=800
		from=Uu, Uh, Uu^Uf
		to=Ql
	[/convert]

#desert appears at high temperatures
	[convert]
		min_temperature=475
		max_temperature=500
		from=Gs
		to=Dd
	[/convert]

	[convert]
		min_temperature=600
		max_temperature=650
		from=Gs
		to=Dd
	[/convert]

	[convert]
		min_temperature=725
		max_temperature=775
		from=Gs
		to=Dd
	[/convert]

	[convert]
		min_temperature=800
		from=Gs
		to=Dd
	[/convert]

#dunes appear at extreme temperatures and moderate elevation
	[convert]
		min_temperature=625
		max_temperature=650
		from=Hh
		to=Hd
	[/convert]

	[convert]
		min_temperature=750
		max_temperature=775
		from=Hh
		to=Hd
	[/convert]

	[convert]
		min_temperature=825
		from=Hh
		to=Hd
	[/convert]

#road costs
	[road_cost]
		terrain=Gg
		cost=10
		convert_to=Re
	[/road_cost]

	[road_cost]
		terrain=Ds
		cost=15
		convert_to=Rd
	[/road_cost]

	[road_cost]
		terrain=Dd
		cost=15
		convert_to=Rd
	[/road_cost]

        [road_cost]
		terrain=Gs^Fp
		cost=20
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Gs^Ft
		cost=20
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Ww
		cost=50
		convert_to_bridge=Ww^Bw|, Ww^Bw/, Ww^Bw\
		convert_to=Ce
        [/road_cost]

        [road_cost]
		terrain=Hh
		cost=30
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm
		cost=40
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Mm^Xm
		cost=75
		convert_to=Re
        [/road_cost]

        [road_cost]
		terrain=Qxu
		cost=100
		convert_to_bridge=Qxu^Bs|, Qxu^Bs/, Qxu^Bs\
		convert_to=Cud
        [/road_cost]
        [road_cost]
		terrain=Ql
		cost=100
		convert_to_bridge=Ql^Bs|, Ql^Bs/, Ql^Bs\
		convert_to=Cud
        [/road_cost]

        [road_cost]
		terrain=Uu
		cost=10
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Uh
		cost=40
		convert_to=Re
        [/road_cost]
        [road_cost]
		terrain=Xu
		cost=90
		convert_to=Re
        [/road_cost]

#road going through snow is covered over by
#the snow (presumably the road was built when
#it wasn't snowing)
        [road_cost]
		terrain=Aa
		cost=20
		convert_to=Aa
        [/road_cost]

	[road_cost]
		terrain=Re
		cost=2
		convert_to=Re
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw|
		cost=2
		convert_to=Ww^Bw|
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw/
		cost=2
		convert_to=Ww^Bw/
	[/road_cost]
	[road_cost]
		terrain=Ww^Bw\
		cost=2
		convert_to=Ww^Bw\
	[/road_cost]
	[road_cost]
		terrain=Ch
		cost=2
		convert_to=Ch
	[/road_cost]

        [village]
            terrain=Gg
            convert_to=Gg^Vh
            adjacent_liked=Gg, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=2
        [/village]

        [village]
            terrain=Gs
            convert_to=Gs^Vht
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
            rating=8
        [/village]

        [village]
            terrain=Ds,Dd
            convert_to=Dd^Vda
            rating=8
            adjacent_liked=Gg, Gs, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Uu
            convert_to=Uu^Vud
            rating=4
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]
        [village]
            terrain=Uh
            convert_to=Uu^Vu
            rating=3
            adjacent_liked=Re,Hh,Mm,Uu,Uh,Xu
        [/village]

        #villages in forest are Elvish
        [village]
            terrain=Gs^Fp
            convert_to=Gg^Ve
            rating=2
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp, Gs^Fp, Gs^Fp
        [/village]
        [village]
            terrain=Hh
            convert_to=Hh^Vhh
            rating=6
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]
        [village]
            terrain=Mm
            convert_to=Mm^Vhh
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #villages in snow
        [village]
            terrain=Aa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        [village]
            terrain=Aa^Fpa
            convert_to=Aa^Vha
            rating=3
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #swamp villages
        [village]
            terrain=Ss
            convert_to=Ss^Vhs
            rating=5
            adjacent_liked=Gg, Ww, Ww, Ww, Ww^Bw|, Ww^Bw/, Ww^Bw\, Rr, Rr, Re, Re, Gg^Ve, Gg^Vh, Hh, Gs^Fp
        [/village]

        #mermen villages - give them low chance of appearing
        [village]
            terrain=Ww
            convert_to=Ww^Vm
            rating=1
            adjacent_liked=Ww, Ww
        [/village]

        [castle]
            valid_terrain=Gs, Gg, Gs^Fp, Hh, Ds, Dd
            min_distance=12
        [/castle]

        [naming]
		{VILLAGE_NAMES}
        [/naming]
#enddef

#define WORLD_CONQUEST_RANDOM_NOISE XDIM YDIM TREE
{VARIABLE I 1}

[while]
	[variable]
		name=I
		less_than={XDIM}
	[/variable]
	[do]
		{VARIABLE J 2}
		{VARIABLE_OP I add 1}
		{VARIABLE random 0}
		[while]
			[variable]
				name=J
				less_than_equal_to={YDIM}
			[/variable]
			[do]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Gs
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..8}
						{VARIABLE terrain Gs^Ft,Gs^Ft,Hh,Hh,Hh}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Dd
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..9}
						{VARIABLE terrain Hd,Hd,Hd,Hd,Hd,Hd,Hd,Hd,Dd^Dr,Gs^Ft,Dd^Do}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Gg
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..9}
						{VARIABLE terrain {TREE},{TREE},Hh,Hh,Hh}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Aa
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..9}
						{VARIABLE terrain Aa^Fpa,Aa^Fpa,Re,Ha,Ha,Ha}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Uu,Uh,Uu^Uf
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..12}
						{VARIABLE terrain Re,Uu^Uf,Uh,Uu}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Re^Uf
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..13}
						{VARIABLE terrain Re,Re,Re,Re,Ds}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Mm
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..14}
						{VARIABLE terrain Gs,Gs,Gs,Gs,Hh,Hh,Hh,{TREE},{TREE},{TREE},Mm^Xm}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Hh
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..18}
						{VARIABLE terrain Gs,Gs,Gs,Gs,Gs,Gs,{TREE},{TREE},{TREE},Mm}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Ha
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..18}
						{VARIABLE terrain Aa,Aa,Aa,Aa,Re,Ai,Aa^Fpa,Aa^Fpa,Aa^Fpa,Mm}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Gs^Fp,Gs^Ft,Gg^Fet
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..22}
						{VARIABLE terrain Gs,Gs,Gs,Gs,Gs,Gs,Gg^Fet,Hh,Hh,Hh,Hh}
					[/then]
				[/if]
				[if]
					[have_location]
						x,y=$I,$J
						terrain=Aa^Fpa
					[/have_location]
					[then]
						{VARIABLE_OP random rand 0..22}
						{VARIABLE terrain Aa,Aa,Aa,Aa,Ai,Re,Gg^Fet,Ha,Ha,Ha,Ha}
					[/then]
				[/if]
				[if]
					# lava and water don't mix!
					[have_location]
						x,y=$I,$J
						terrain=Ww
					[/have_location]
					[have_location]
						[and]
							x,y=$I,$J
							radius=1
						[/and]
						terrain=Ql,Qlf
					[/have_location]
					[then]
						{VARIABLE random 8}
						{VARIABLE terrain Rd,Rd}
					[/then]
				[/if]
				[if]
					# open up passes into caves: impassable mountains that border cave wall and have both cave and noncave hexes get downgraded into plain mountain
					[have_location]
						x,y=$I,$J
						terrain=Mm^Xm
					[/have_location]
					[have_location]
						[and]
							x,y=$I,$J
							radius=1
						[/and]
						terrain=Xu
					[/have_location]
					[have_location]
						[and]
							x,y=$I,$J
							radius=1
						[/and]
						terrain=Uu,Uh,Uu^Uf
					[/have_location]
					[have_location]
						[and]
							x,y=$I,$J
							radius=1
						[/and]
						[not]
							terrain=Uu,Uh,Uu^Uh,Xu
						[/not]
					[/have_location]
					[then]
						{VARIABLE random 8}
						{VARIABLE terrain Mm,Mm}
					[/then]
				[/if]
				[if]
					[variable]
						name=random
						greater_than_equal_to=8
					[/variable]
					[then]
						{VARIABLE_OP random rand $terrain}
						[terrain]
							x,y=$I,$J
							terrain=$random
						[/terrain]
					[/then]
				[/if]
				
				{VARIABLE_OP J add 1}
			[/do]
		[/while]
	[/do]
[/while]
#enddef
