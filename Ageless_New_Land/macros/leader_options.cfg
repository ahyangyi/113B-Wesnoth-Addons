#define DONATE_FUNDS_OPTION TARGET_SIDE
    [option]
        message= _ "@$player[{TARGET_SIDE}].name"
        [show_if]
            {CONDITION leader.gold greater_than_equal_to 20}
            [have_unit]
                side={TARGET_SIDE}
                canrecruit=yes
            [/have_unit]
        [/show_if]
        [command]
            [message]
                speaker=unit
                message= _ "I hereby donate 20 gold to the coffers of $player[{TARGET_SIDE}].name|."
            [/message]
            {ADD_GOLD_SIDE {TARGET_SIDE} 20}
            {ADD_GOLD_SIDE $side_number -20}
            {VARIABLE_OP leader.gold add -20}
            {VARIABLE finished_options yes}
            {VARIABLE finished_suboptions yes}
            {VARIABLE_OP unit.moves value 0}
            {REDRAW}
        [/command]
    [/option]
#enddef

#define SHARE_FARMING_KNOWLEDGE_OPTION TARGET_SIDE
    [option]
        message= _ {MENU_IMG_TXT "items/flower4.png" _"@$player[{TARGET_SIDE}].name
Share knowledge of agriculture"}
        [show_if]
            {CONDITION player[$side_number].farming.gold greater_than $player[{TARGET_SIDE}].farming.gold}
            [have_unit]
                side={TARGET_SIDE}
                canrecruit=yes
            [/have_unit]
        [/show_if]
        [command]
            {VARIABLE_OP player[{TARGET_SIDE}].farming.progress add 1}
            {VARIABLE finished_options yes}
            {VARIABLE finished_suboptions yes}
            {VARIABLE_OP unit.moves value 0}
            {REDRAW}
            [message]
                speaker=unit
                message= _ "$player[{TARGET_SIDE}].name|, since our wisdom exceeds yours I have instructed my scholars to further your understanding of agriculture."
            [/message]
        [/command]
    [/option]
#enddef

#define SHARE_MINING_KNOWLEDGE_OPTION TARGET_SIDE
    [option]
        message= _ {MENU_IMG_TXT "items/gold-coins-small.png" _"@$player[{TARGET_SIDE}].name
Share knowledge of mining"}
        [show_if]
            {CONDITION player[$side_number].mining.gold greater_than $player[{TARGET_SIDE}].mining.gold}
            [have_unit]
                side={TARGET_SIDE}
                canrecruit=yes
            [/have_unit]
        [/show_if]
        [command]
            {VARIABLE_OP player[{TARGET_SIDE}].mining.progress add 1}
            {VARIABLE finished_options yes}
            {VARIABLE finished_suboptions yes}
            {VARIABLE_OP unit.moves value 0}
            {REDRAW}
            [message]
                speaker=unit
                message= _ "$player[{TARGET_SIDE}].name|, since the wisdom of my people exceeds yours I have instructed my scholars to aid you in your efforts to learn the science of mining."
            [/message]
        [/command]
    [/option]
#enddef

#define SHARE_WARFARE_KNOWLEDGE_OPTION TARGET_SIDE
    [option]
        message= _ {MENU_IMG_TXT "wesnoth-icon.png" _"@$player[{TARGET_SIDE}].name
Share knowledge of warfare"}
        [show_if]
            {CONDITION player[$side_number].warfare.target greater_than $player[{TARGET_SIDE}].warfare.target}
            [have_unit]
                side={TARGET_SIDE}
                canrecruit=yes
            [/have_unit]
        [/show_if]
        [command]
            {VARIABLE_OP player[{TARGET_SIDE}].warfare.progress add 1}
            {VARIABLE finished_options yes}
            {VARIABLE finished_suboptions yes}
            {VARIABLE_OP unit.moves value 0}
            {REDRAW}
            [message]
                speaker=unit
                message= _ "You know worryingly little about the arts of war, $player[{TARGET_SIDE}].name|. I feel an obligation to instruct you in this vital matter."
            [/message]
        [/command]
    [/option]
#enddef

#define LEADER_OPTIONS
    [set_menu_item]
        id=Diplomacy
        description=_ "Diplomacy"
        [show_if]
            [have_unit]
                side=$side_number
                x,y=$x1,$y1
                canrecruit=yes
                [not]
                    [filter_wml]
                        moves=0
                    [/filter_wml]
                [/not]
            [/have_unit]
        [/show_if]
        [filter_location]
            terrain="Gg^Ve,Gg^Vea"
        [/filter_location]
        [command]
            [store_side]
                side=$side_number
                variable=leader
            [/store_side]

            [store_unit]
                [filter]
                    x=$x1
                    y=$y1
                [/filter]
                variable=unit
            [/store_unit]

            {VARIABLE_OP side value $unit.side}
            {VARIABLE finished_options no}
            [while]
                {CONDITION finished_options equals no}
                [do]
                    [message]
                        caption=_ "Diplomatic Options"
                        speaker=unit
                        message= _ "What shall I do?
                                                                                    "

                        # Nothing

                        [option]
                            message= _ "Nothing"
                            [command]
                                {VARIABLE finished_options yes}
                            [/command]
                        [/option]

                        # Giving Money

                        [option]
                            message= _ {MENU_IMG_TXT "items/gold-coins-small.png" _"@Donate Funds
Give 20 gold to another player"}
                            [show_if]
                                {CONDITION leader.gold greater_than_equal_to 20}
                                {CONDITION player[$side_number].faction equals Loyalists}
                                [or]
                                    {CONDITION leader.gold greater_than_equal_to 20}
                                    {CONDITION player[$side_number].faction equals Undead}
                                [/or]
                            [/show_if]
                            [command]
                                {VARIABLE finished_suboptions no}
                                [while]
                                    {CONDITION finished_suboptions equals no}
                                    [do]
                                        [message]
                                            caption=_ "Diplomatic Options"
                                            speaker=unit
                                            image=items/gold-coins-small.png
                                            message= _ "Who will you donate funds to?"

                                            [option]
                                                message= _ "Back"
                                                [command]
                                                    {VARIABLE finished_suboptions yes}
                                                [/command]
                                            [/option]

                                            {DONATE_FUNDS_OPTION 1}
                                            {DONATE_FUNDS_OPTION 2}
                                            {DONATE_FUNDS_OPTION 3}
                                            {DONATE_FUNDS_OPTION 4}
                                            {DONATE_FUNDS_OPTION 5}
                                            {DONATE_FUNDS_OPTION 6}
                                            {DONATE_FUNDS_OPTION 7}
                                            {DONATE_FUNDS_OPTION 8}
                                            {DONATE_FUNDS_OPTION 9}
                                        [/message]
                                    [/do]
                                [/while]
                            [/command]
                        [/option]

                        # Sharing Knowledge

                        [option]
                            message= _ {MENU_IMG_TXT "items/book4.png" _"@Share Knowledge
Help an ally with their research"}
                            [show_if]
                                [not]
                                    {CONDITION player[$side_number].faction equals Undead}
                                [/not]
                            [/show_if]
                            [command]
                                {VARIABLE finished_suboptions no}
                                [while]
                                    {CONDITION finished_suboptions equals no}
                                    [do]
                                        [message]
                                            caption=_ "Diplomatic Options"
                                            speaker=unit
                                            image=items/book4.png
                                            message= _ "Who will you share knowledge with?"

                                            [option]
                                                message= _ "Back"
                                                [command]
                                                    {VARIABLE finished_suboptions yes}
                                                [/command]
                                            [/option]

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 1}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 1}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 1}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 2}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 2}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 2}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 3}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 3}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 3}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 4}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 4}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 4}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 5}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 5}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 5}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 6}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 6}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 6}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 7}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 7}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 7}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 8}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 8}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 8}

                                            {SHARE_FARMING_KNOWLEDGE_OPTION 9}
                                            {SHARE_MINING_KNOWLEDGE_OPTION 9}
                                            {SHARE_WARFARE_KNOWLEDGE_OPTION 9}
                                        [/message]
                                    [/do]
                                [/while]
                            [/command]
                        [/option]

                        # NEGOTIATIONS (option 1)

                        # Merfolk

                        [option]
                            message= _ {MENU_IMG_TXT "units/merfolk/hoplite.png~TC(1,magenta)" _"@Negotiate with the Merfolk
Lets you recruit a Merfolk unit
Negotiation Progress: $player[$side_number].leader_option_1.progress|/$player[$side_number].leader_option_1.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Loyalists}
								[or]
	                                {CONDITION player[$side_number].faction equals Elves}
								[/or]
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_1.progress add 1}
                            [/command]
                        [/option]

			# Drakes

                        [option]
                            message= _ {MENU_IMG_TXT "units/drakes/flameheart.png~TC(1,magenta)" _"@Negotiate with the Drakes
Lets you recruit a Drake unit
Negotiation Progress: $player[$side_number].leader_option_1.progress|/$player[$side_number].leader_option_1.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Khalifate}
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_1.progress add 1}
                            [/command]
                        [/option]

                        # Dwarves

                        [option]
                            message= _ {MENU_IMG_TXT "units/dwarves/lord.png~TC(1,magenta)" _"@Negotiate with the Dwarves
Lets you recruit a Dwarvish unit
Negotiation Progress: $player[$side_number].leader_option_1.progress|/$player[$side_number].leader_option_1.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Outlaws}
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_1.progress add 1}
                            [/command]
                        [/option]

                        # Saurians

                        [option]
                            message= _ {MENU_IMG_TXT "units/saurians/augur.png~TC(1,magenta)" _"@Negotiate with the Saurians
Lets you recruit a Saurian unit
Negotiation Progress: $player[$side_number].leader_option_1.progress|/$player[$side_number].leader_option_1.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Orcs}
                                [or]
                                    {CONDITION player[$side_number].faction equals Undead}
									[or]
										{CONDITION player[$side_number].faction equals Drakes}
									[/or]
                                [/or]
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_1.progress add 1}
                            [/command]
                        [/option]

                        # Outlaw

                        [option]
                            message= _ {MENU_IMG_TXT "units/human-outlaws/fugitive.png~TC(1,magenta)" _"@Negotiate with the Outlaw
Lets you recruit a Outlaw unit
Negotiation Progress: $player[$side_number].leader_option_1.progress|/$player[$side_number].leader_option_1.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Saurians}
                                [or]
                                    {CONDITION player[$side_number].faction equals Dwarves}
                                [/or]
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_1.progress add 1}
                            [/command]
                        [/option]

                        # Undead

                        [option]
                            message= _ {MENU_IMG_TXT "units/undead-skeletal/deathblade.png~TC(1,magenta)" _"@Negotiate with the Undead
Lets you recruit an Undead unit
Negotiation Progress: $player[$side_number].leader_option_1.progress|/$player[$side_number].leader_option_1.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Chaos}
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_1.progress add 1}
                            [/command]
                        [/option]

                        # Ice Wyrm

                        [option]
                            message= _ {MENU_IMG_TXT "units/wyrms-ice/wyrm1.png~TC(1,magenta)" _"@Negotiate with the Ice Wyrm
Lets you recruit an Ice Wyrm
Negotiation Progress: $player[$side_number].leader_option_1.progress|/$player[$side_number].leader_option_1.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Issaelfr}
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_1.progress add 1}
                            [/command]
                        [/option]

                        # NEGOTIATIONS (option 2)

                        # Elves

                        [option]
                            message= _ {MENU_IMG_TXT "units/elves-wood/marshal.png~TC(1,magenta)" _"@Negotiate with the Elves
Lets you recruit an Elvish unit
Negotiation Progress: $player[$side_number].leader_option_2.progress|/$player[$side_number].leader_option_2.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Loyalists}
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_2.progress add 1}
                            [/command]
                        [/option]

                        # Naga

                        [option]
                            message= _ {MENU_IMG_TXT "units/nagas/fighter.png~TC(1,magenta)" _"@Negotiate with the Naga
Lets you recruit a Naga unit
Negotiation Progress: $player[$side_number].leader_option_2.progress|/$player[$side_number].leader_option_2.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Orcs}
                                [or]
                                    {CONDITION player[$side_number].faction equals Outlaws}
									[or]
										{CONDITION player[$side_number].faction equals Saurians}
									[/or]
                                [/or]
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_2.progress add 1}
                            [/command]
                        [/option]

                        # Monsters

                        [option]
                            message= _ {MENU_IMG_TXT "units/undead-blackspell.png" _"@Summon monster
Lets you recruit a monster unit
Negotiation Progress: $player[$side_number].leader_option_2.progress|/$player[$side_number].leader_option_2.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Undead}
								[or]
									{CONDITION player[$side_number].faction equals Chaos}
								[/or]
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_2.progress add 1}
                            [/command]
                        [/option]

                        # Human

                        [option]
                            message= _ {MENU_IMG_TXT "units/human-loyalist/lieutenant.png" _"@Negotiate with the Loyalist
Lets you recruit a loyalist unit
Negotiation Progress: $player[$side_number].leader_option_2.progress|/$player[$side_number].leader_option_2.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Elves}
								[or]
	                                {CONDITION player[$side_number].faction equals Dwarves}
									[or]
		                                {CONDITION player[$side_number].faction equals Khalifate}
									[/or]
								[/or]
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_2.progress add 1}
                            [/command]
                        [/option]

                        # Orcs

                        [option]
                            message= _ {MENU_IMG_TXT "units/orcs/ruler.png" _"@Negotiate with the Orc
Lets you recruit an Orcish unit
Negotiation Progress: $player[$side_number].leader_option_2.progress|/$player[$side_number].leader_option_2.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Drakes}
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_2.progress add 1}
                            [/command]
                        [/option]

                        # Marauders

                        [option]
                            message= _ {MENU_IMG_TXT "units/human-marauders/seeress.png" _"@Negotiate with the Marauder
Lets you recruit a Marauder unit
Negotiation Progress: $player[$side_number].leader_option_2.progress|/$player[$side_number].leader_option_2.target"}
                            [show_if]
                                {CONDITION player[$side_number].faction equals Issaelfr}
                            [/show_if]
                            [command]
                                {VARIABLE finished_options yes}
                                {VARIABLE_OP unit.moves value 0}
                                {VARIABLE_OP player[$side_number].leader_option_2.progress add 1}
                            [/command]
                        [/option]

                    [/message]
                [/do]
            [/while]

            # Picking a Diplomacy unit

            # Merfolk

            [if]
                {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                {CONDITION player[$side_number].faction equals Loyalists}
				[or]
					{CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
					{CONDITION player[$side_number].faction equals Elves}
				[/or]
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="portraits/merfolk/fighter.png"
                        message= _ "An agreement has been reached - we the merfolk will help you as we can. Which of our shoal do you want to recruit?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/merfolk/fighter.png~TC(1,magenta)") ("Merman Fighter")}
                        {PICK_RECRUIT_OPTION ("units/merfolk/hunter.png~TC(1,magenta)") ("Merman Hunter")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_1.progress value 0}
                [/then]
            [/if]

            # Drake

            [if]
                {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                {CONDITION player[$side_number].faction equals Khalifate}
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="portraits/drake/fighter.png"
                        message= _ "An agreement has been reached - we glorious drakes will help you! Which of our shoal do you want to recruit?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/drakes/burner.png~TC(1,magenta)") ("Drake Burner")}
                        {PICK_RECRUIT_OPTION ("units/drakes/clasher.png~TC(1,magenta)") ("Drake Clasher")}
                        {PICK_RECRUIT_OPTION ("units/drakes/warrior.png~TC(1,magenta)") ("Drake Fighter")}
                        {PICK_RECRUIT_OPTION ("units/drakes/glider.png~TC(1,magenta)") ("Drake Glider")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_1.progress value 0}
                [/then]
            [/if]

            # Dwarves

            [if]
                {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                {CONDITION player[$side_number].faction equals Outlaws}
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="../data/campaigns/The_Rise_Of_Wesnoth/images/portraits/burin.png"
                        message= _ "Our talks are complete - the Dwarves will gladly fight by your side. Which of our brethren do you want to recruit?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/dwarves/fighter.png~TC(1,magenta)") ("Dwarvish Fighter")}
                        {PICK_RECRUIT_OPTION ("units/dwarves/guard.png~TC(1,magenta)") ("Dwarvish Guardsman")}
                        {PICK_RECRUIT_OPTION ("units/dwarves/thunderer.png~TC(1,magenta)") ("Dwarvish Thunderer")}
                        {PICK_RECRUIT_OPTION ("units/dwarves/ulfserker.png~TC(1,magenta)") ("Dwarvish Ulfserker")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_1.progress value 0}
                [/then]
            [/if]

            # Saurians

            [if]
                {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                {CONDITION player[$side_number].faction equals Orcs}
                [or]
                    {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                    {CONDITION player[$side_number].faction equals Undead}
					[or]
						{CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
						{CONDITION player[$side_number].faction equals Drakes}
					[/or]
                [/or]
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="portraits/Alex_Jarocha-Ernst/saurian-augur.png"
                        message= _ "Us saurians agree to aid you in your struggle. Which of our tribe do you want to recruit?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/saurians/augur.png~TC(1,magenta)") ("Saurian Augur")}
                        {PICK_RECRUIT_OPTION ("units/saurians/skirmisher.png~TC(1,magenta)") ("Saurian Skirmisher")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_1.progress value 0}
                [/then]
            [/if]

            # Outlaws

            [if]
                {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                {CONDITION player[$side_number].faction equals Saurians}
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="portraits/humans/bandit.png"
                        message= _ "What do you want us to provide for you?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/human-outlaws/thief.png~TC(1,magenta)") ("Thief")}
                        {PICK_RECRUIT_OPTION ("units/human-outlaws/footpad.png~TC(1,magenta)") ("Footpad")}
                        {PICK_RECRUIT_OPTION ("units/human-outlaws/thug.png~TC(1,magenta)") ("Thug")}
                        {PICK_RECRUIT_OPTION ("units/human-outlaws/poacher.png~TC(1,magenta)") ("Poacher")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_1.progress value 0}
                [/then]
            [/if]

            # Undead

            [if]
                {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                {CONDITION player[$side_number].faction equals Chaos}
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="portraits/undead/deathblade.png"
                        message= _ "The deaths agree to aid you!
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/undead-skeletal/skeleton.png~TC(1,magenta)") ("Skeleton")}
                        {PICK_RECRUIT_OPTION ("units/undead-skeletal/archer.png~TC(1,magenta)") ("Skeleton Archer")}
                        {PICK_RECRUIT_OPTION ("units/undead/ghost-s-2.png~TC(1,magenta)") ("Ghost")}
                        {PICK_RECRUIT_OPTION ("units/undead/ghoul.png~TC(1,magenta)") ("Ghoul")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_1.progress value 0}
                [/then]
            [/if]

            # Ice Wyrms

            [if]
                {CONDITION player[$side_number].leader_option_1.progress greater_than_equal_to $player[$side_number].leader_option_1.target}
                {CONDITION player[$side_number].faction equals Issaelfr}
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="units/wyrms-ice/wyrm3f.png"
                        message= _ "We wyrms agrees to help you. Please just click the option below!
                                                                                    "
                        {PICK_RECRUIT_OPTION ("units/wyrms-ice/wyrm1.png~TC(1,magenta)") ("AE Ice Wyrm")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_1.progress value 0}
                [/then]
            [/if]

            # Elves

            [if]
                {CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
                {CONDITION player[$side_number].faction equals Loyalists}
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="../data/campaigns/The_Rise_Of_Wesnoth/images/portraits/isomithir.png"
                        message= _ "Our talks are complete - the Elves shall aid you in this battle. Which our of kin do you wish to recruit?
                                                                                    "					

                        {PICK_RECRUIT_OPTION ("units/elves-wood/archer.png~TC(1,magenta)") ("Elvish Archer")}
                        {PICK_RECRUIT_OPTION ("units/elves-wood/fighter.png~TC(1,magenta)") ("Elvish Fighter")}
                        {PICK_RECRUIT_OPTION ("units/elves-wood/scout.png~TC(1,magenta)") ("Elvish Scout")}
                        {PICK_RECRUIT_OPTION ("units/elves-wood/shaman.png~TC(1,magenta)") ("Elvish Shaman")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_2.progress value 0}
                [/then]
            [/if]

            # Nagas

            [if]
                {CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
                {CONDITION player[$side_number].faction equals Orcs}
                [or]
                    {CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
                    {CONDITION player[$side_number].faction equals Outlaws}
					[or]
						{CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
						{CONDITION player[$side_number].faction equals Saurians}
					[/or]
                [/or]
                [then]
                    [message]
                        speaker=narrator
                        caption=_ "Negotiation Complete"
                        image="portraits/nagas/fighter+female.png"
                        message= _ "An agreement has been reached - we the nagas will help you as we can. Which of our shoal do you want to recruit?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/nagas/fighter.png~TC(1,magenta)") ("Naga Fighter")}
                        {PICK_RECRUIT_OPTION ("units/nagas/guardian.png~TC(1,magenta)") ("AE Naga Guardian")}
                        {PICK_RECRUIT_OPTION ("units/nagas/hunter.png~TC(1,magenta)") ("AE Naga Hunter")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_2.progress value 0}
                [/then]
            [/if]

            # Monsters

            [if]
                {CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
                {CONDITION player[$side_number].faction equals Undead}
				[or]
					{CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
					{CONDITION player[$side_number].faction equals Chaos}
				[/or]
                [then]
                    [message]
                        speaker=unit
                        caption=_ "Summoning Complete"
                        image="units/undead-blackspell.png"
                        message= _ "Which monster will you summon?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/monsters/scorpion.png~TC(1,magenta)") ("Giant Scorpion")}
                        {PICK_RECRUIT_OPTION ("units/monsters/giant-mudcrawler.png~TC(1,magenta)") ("Giant Mudcrawler")}
                        {PICK_RECRUIT_OPTION ("units/monsters/deep-tentacle.png~TC(1,magenta)") ("Tentacle of the Deep")}
                        {PICK_RECRUIT_OPTION ("units/monsters/wolf.png~TC(1,magenta)") ("Wolf")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_2.progress value 0}
                [/then]
            [/if]

            # Human

            [if]
                {CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
                {CONDITION player[$side_number].faction equals Elves}
				[or]
					{CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
					{CONDITION player[$side_number].faction equals Dwarves}
				[or]
					{CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
					{CONDITION player[$side_number].faction equals Khalifate}
				[/or]
				[/or]
                [then]
                    [message]
                        speaker=unit
                        caption=_ "Negotiation Complete"
                        image="portraits/humans/general.png"
                        message= _ "Friend, we are coming to help. Which of us do you need?
                                                                                    "
                        {PICK_RECRUIT_OPTION ("units/human-loyalists/pikeman.png~TC(1,magenta)") ("Pikeman")}
                        {PICK_RECRUIT_OPTION ("units/human-loyalists/heavyinfantry.png~TC(1,magenta)") ("Heavy Infantryman")}
                        {PICK_RECRUIT_OPTION ("units/human-loyalists/fencer.png~TC(1,magenta)") ("Fencer")}
                        {PICK_RECRUIT_OPTION ("units/human-loyalists/bowman.png~TC(1,magenta)") ("Bowman")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_2.progress value 0}
                [/then]
            [/if]

            # Orcs

            [if]
                {CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
                {CONDITION player[$side_number].faction equals Undead}
				[or]
					{CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
					{CONDITION player[$side_number].faction equals Chaos}
				[/or]
                [then]
                    [message]
                        speaker=unit
                        caption=_ "Negotiation Complete"
                        image="portraits/orcs/warlord.png"
                        message= _ "Agree - which troops do you want?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/orcs/grunt.png~TC(1,magenta)") ("Orcish Grunt")}
                        {PICK_RECRUIT_OPTION ("units/orcs/archer.png~TC(1,magenta)") ("Orcish Archer")}
                        {PICK_RECRUIT_OPTION ("units/orcs/assassin.png~TC(1,magenta)") ("Orcish Assassin")}
                        {PICK_RECRUIT_OPTION ("units/orcs/leader.png~TC(1,magenta)") ("Orcish Leader")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_2.progress value 0}
                [/then]
            [/if]

            # Marauders

            [if]
                {CONDITION player[$side_number].leader_option_2.progress greater_than_equal_to $player[$side_number].leader_option_2.target}
                {CONDITION player[$side_number].faction equals Issaelfr}
                [then]
                    [message]
                        speaker=unit
                        caption=_ "Negotiation Complete"
                        image="units/human-marauders/seeress.png"
                        message= _ "Dear elvish friends, what kind of help do you need?
                                                                                    "

                        {PICK_RECRUIT_OPTION ("units/human-marauders/fay.png~TC(1,magenta)") ("AE Marauder Fay")}
                        {PICK_RECRUIT_OPTION ("units/human-marauders/scout.png~TC(1,magenta)") ("AE Marauder Scout")}
                        {PICK_RECRUIT_OPTION ("units/human-marauders/crusher.png~TC(1,magenta)") ("AE Marauder Crusher")}
                        {PICK_RECRUIT_OPTION ("units/human-marauders/axeman.png~TC(1,magenta)") ("AE Marauder Axeman")}
                    [/message]
                    {VARIABLE_OP player[$side_number].leader_option_2.progress value 0}
                [/then]
            [/if]

            [unstore_unit]
                variable=unit
            [/unstore_unit]
        [/command]
    [/set_menu_item]
#enddef
